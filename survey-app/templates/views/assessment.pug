extends ../layouts/default
include ../mixins/question-types

block content
    .container-fluid: .row.show-grid#assessment-mid
        .container
            if modules && modules.length
                .col-sm-12#moduleLinks
                    ul.nav.nav-pills(role="tablist")
                        - let i = 0
                        each mod in modules
                            if i == active
                                li.nav-item.active
                                    a.nav-link(href="/assessment?surveyIndex="+i++) #{mod.name}
                            else
                                li.nav-item
                                    a.nav-link(href="/assessment?surveyIndex="+i++) #{mod.name}
            
        .container-fluid#assessment-body
            .row
                if modules && modules.length
                    .container
                        .col-sm-8
                            h3 #{modules[active].name}
                            if modules[active].questions
                                +question-form(modules[active].questions, modules[active].id, modules[active].answers)
                        .col-sm-4
                            if modules[active].resources.length > 0
                                h3 Resources
                                each resource in modules[active].resources
                                    a(href=resource.link) 
                                        .thumbnail
                                            if resource.image
                                                img(src=resource.image alt=resource.title onerror="this.style.display='none'")
                                            .caption
                                                h3 #{resource.title}
                                                p #{resource.description}

                if !modules || modules.length == 0
                    p You haven't been assigned any modules 
